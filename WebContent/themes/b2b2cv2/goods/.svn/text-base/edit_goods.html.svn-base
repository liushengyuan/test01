<#include '/store/store_header.html' />
<#assign regionSelect = "com.enation.app.shop.core.tag.regions.RegionSelectDirective"?new()>
<link rel="stylesheet" type="text/css" href="${ctx}/themes/b2b2cv2/css/uploadify.css" />
<script type="text/javascript" src="${ctx}/themes/b2b2cv2/js/jquery.uploadify.min.js"></script>
<script type="text/javascript" src="${ctx}/editor/ckeditor362/ckeditor.js"></script>
<script type="text/javascript" src="${ctx}/editor/ckeditor362/adapters/jquery.js"></script>
<script type="text/javascript" src="${ctx}/themes/b2b2cv2/js/goodsSpec.js"></script>

<link rel="stylesheet" href="../../editor/kindeditor-4.1.10/themes/default/default.css" />
<link rel="stylesheet" href="../../editor/kindeditor-4.1.10/plugins/code/prettify.css" />
<script charset="utf-8" src="../../editor/kindeditor-4.1.10/kindeditor.js"></script>
<#if locale=="zh">
<script charset="utf-8" src="../../editor/kindeditor-4.1.10/lang/zh_CN.js"></script>
<#elseif locale=="ru">
<script charset="utf-8" src="../../editor/kindeditor-4.1.10/lang/ru.js"></script>
</#if>
<script charset="utf-8" src="../../editor/kindeditor-4.1.10/plugins/code/prettify.js"></script>
<!-- 品牌列表Tag -->
<#assign brandTag=newTag("brandListTag")/>
<#assign brandList=brandTag()/>
<!-- 店铺商品 -->
<#assign storeGoodsInfoTag=newTag("storeGoodsInfoTag")/>
<#assign storeGoodsInfo=storeGoodsInfoTag("{'goods_id':'${goods_id}'}")/>
<#assign storeGoods=storeGoodsInfo.goods>
<!-- 商品分类 -->
<#assign storeGoodsCatTag=newTag("storeGoodsCatTag")/>
<#if new_catid??>
	<#assign storeGoodsCat=storeGoodsCatTag("{'catid':'${new_catid}'}")/>
<#else>
	<#assign storeGoodsCat=storeGoodsCatTag("{'catid':'${storeGoods.cat_id}'}")/>
</#if>
<#-- 创建店铺商品分类标签 --> 
<#assign storeGoodsCatListTag= newTag("storeGoodsCatListTag") > 
<#-- 查询店铺商品分类列表 0表示查子分类 --> 
<#assign storeGoodsCatList= storeGoodsCatListTag("'type':0")!''>

<#-- 商品规格标签 -->
<#assign goodsSpecTag=newTag("goodsSpecTag")/>
<#assign goodsSpec=goodsSpecTag("{'goods_id':${goods_id}}") />
<#-- 商品规格标签 -->
<#-- <#assign storeGoodsSpecTag=newTag("storeGoodsSpecTag") />
<#assign goodsSpecList=storeGoodsSpecTag() /> -->
<#assign storeGoodsSpecTag=newTag("storeGoodsSpecForCatTag") />
<#assign goodsSpecList=storeGoodsSpecTag("{'catid':'${storeGoods.cat_id}'}") /><#--"'catid':'"+storeGoods.cat_id+"'" -->
<#-- 店铺投放市场标签 -->
<#assign judgeStoreMarketTag = newTag("judgeStoreMarketTag") >
<#assign storeMarket = judgeStoreMarketTag()!'' >

<div class="store_center">
	<#--<#include '/store/left_menu.html' />-->
	<div id="sotre_right_content" class="sotre_right_content_add_goods">
		<div class="path">
			<span style="color:#999;"><@uiLabel text="sellerAccount.Location"/>：</span>
			<span>></span>
			<a href="#"><@uiLabel text="sellerAddGood.producttype"/></a><span>></span><@uiLabel text="sellerAddGood.fubushangpin"/>
		</div>
		<#if locale=="zh">
		<div class="select_cat_img">
			<ul>
				<li class="step a2" title="<@uiLabel text="sellerAddGood.xjspszfl"/>"></li>
				<li class="step b1" title="<@uiLabel text="sellerAddGood.txspxxxx"/>"></li>
				<li class="step c2" title="<@uiLabel text="sellerAddGood.spfbcg"/>"></li>
			</ul>
		</div>
		<#elseif locale=="ru">
	<div class="select_cat_img">
			<ul>
				<li style="margin-left:-30px;" class="step a2" title="<@uiLabel text="sellerAddGood.xjspszfl"/>"></li>
				<li class="step b1" title="<@uiLabel text="sellerAddGood.txspxxxx"/>"></li>
				<li style="width:370px;" class="step c2" title="<@uiLabel text="sellerAddGood.spfbcg"/>"></li>
			</ul>
		</div>
		</#if>
		<!-- 修改商品基本信息 -->
		<input type="hidden" id="setLanguageForGoodsOption" <#if locale=="zh">value="zh"<#elseif locale=="ru">value="ru"</#if>>
		<div class="store_add_goods">
			<form method="post" id="storeGoodsForm" name="storeGoodsForm" class="validate">
				<input type="hidden" name="cost" value="0" />
			<input type="hidden" name="storeGoods.cat_id" value="<#if new_catid??>${new_catid}<#else>${storeGoods.cat_id}</#if>">
			<input type="hidden" name="storeGoods.goods_id" value="${storeGoods.goods_id}">
			<input type="hidden" id="freightchn" value="${storeGoods.freight}">
			<input type="hidden" id="freightru1"  value="${storeGoods.freightru}">
			<input type="hidden" name="storeGoods.type_id" value="${storeGoodsCat.typeid}">
			<input type="hidden" name="storeGoods.store" value="${storeGoods.store}">
			<input type="hidden" name="storeGoods.store_id" value="${storeGoods.store_id}">
			<input type="hidden" name="storeGoods.enable_store" value="${storeGoods.enable_store}">
			<input type="hidden" name="storeGoods.audit_status" value="0">
			<input type="hidden" name="storeGoods.goods_translation" value="0"><!-- 将翻译状态设为未翻译 -->
			<input type="hidden"  id="goodsdiscount" value="${storeGoods.is_discount!0}">
			<input type="hidden" id="store_logis_id" name="store_id" value="${myStoreDetail.store_id}"/>
			<input type="hidden" id="myFreightType" value="${storeGoods.freightType!''}">
                    <div class="goods_cat">
                        <@uiLabel text="sellerAddGood.producttype"/>：
					<#list storeGoodsCat.parentList as parent>
						<#if parent_index != 0>
                            <span>&nbsp;&gt;&nbsp;</span>
						</#if>
                        <span>
                        <#if locale=="zh">
                        	 ${parent.name!}
                        <#elseif locale=="ru">
                        	 ${parent.name_ru!}
                        </#if>
                        </span>
					</#list>
					&nbsp;&nbsp;&nbsp;&nbsp;<a href="${ctx}/goods/edit_goods_cat.html?menu=store_goods&goods_id=${goods_id}"  style="color: #B22222 !important;font-weight:800;"><@uiLabel text="sellerAddGood.editgoodsType"/>>></a>
                    </div>
				<div class="addgoods">
			<h1>1、<@uiLabel text="sellerAddGood.goodsbaseInfo"/></h1>
				<dl>
					<dt class="required">
						<span style="color:red;">*</span><@uiLabel text="sellerAddGood.goodsName"/>：
					</dt>
					<dd>
						<p>
							<input type="text" class="text" name="storeGoods.name" value="${storeGoods.name}" isrequired="true" <#-- datatype="string" --> fun="checkGoodsName" style="width: 500px;"/>
						<p>
						<p class="hint"><@uiLabel text="sellerAddGood.goodsrule"/></p>
					</dd>
				</dl>
						<dl>
                            <dt class="required">
                                <span style="color:red;">*</span><@uiLabel text="sellerAddGood.goodsKeyWord"/>：
                            </dt>
                            <dd>
                                <p>
                                   <#assign showKeyWordNewTag=newTag("showKeyWordNewTag")/>
                                   <#assign showKeyWordNew=showKeyWordNewTag("{'goods_id':${goods_id}}") />
                                   <#if showKeyWordNew.original_metal_keywords??>
									   <#assign meta_keywords = showKeyWordNew.original_metal_keywords!'' />
									   <#assign keywords = meta_keywords?split(",") />
                                   <#else>
	                                   <#--${storeGoods.meta_keywords!'1234567'}-->
										<#assign meta_keywords = storeGoods.meta_keywords!'' />
										<#assign keywords = meta_keywords?split(",") />
                                   </#if>
									<input type="hidden" id="meta_keywords" name="storeGoods.meta_keywords" value="${meta_keywords!''}" />
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" value="${keywords[0]}"
                                           datatype="string" isrequired="true"/>
                                    <#-- <input type="button" name="addKeywordMore" value="添加更多" class="keyword_more"/> -->
                                <p>
                                <p class="hint"><@uiLabel text="sellerAddGood.goodsKeyWordRule"/></p>
                                <p id="keywordMoreP">
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[1]!''}" />
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[2]!''}"/>
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[3]!''}"/>
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[4]!''}"/>
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[5]!''}"/>
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[6]!''}"/>
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[7]!''}"/>
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[8]!''}"/>
                                    <input type="text" class="text store_metaKeyword" name="metaKeyword" datatype="string" value="${keywords[9]!''}"/>
                                </p>
                            </dd>
						</dl>
				<dl>
					<dt nc_type="no_spec"><@uiLabel text="sellerAddGood.ProductNumber"/>：</dt>
					<dd nc_type="no_spec">
						<p>
							<input type="text" class="text" name="storeGoods.sn" value="${storeGoods.sn!''}" datatype="string"  disabled="disabled" />
						</p>
					</dd>
				</dl>
				<!-- <dl>
					<dt><span style="color: red">*</span>地区选择：</dt>
					<dd>
					 <@regionSelect province_id="${ storeGoods.province_id }" city_id="${ storeGoods.city_id }" region_id="${ storeGoods.region_id }" />
					</dd>
		        </dl> -->
		        <dl>
                     <dt nc_type="no_spec">
                         <span style="color:red;">*</span>产地：
                     </dt>
                     <dd nc_type="no_spec">
                         <p>
                             <input type="text" class="text" id="poriginId" name="storeGoods.porigin" value="${storeGoods.porigin!''}" isrequired="true"/>  
                         </p>
                     </dd>
                 </dl>
                  <dl>
					  <dt><span style="color: red">*</span>发货地：</dt>
					  <dd>		
					     <select name="storeGoods.deliveryregion" fun="checkdelivery">
                             <option value="7"<#if storeGoods.deliveryregion==7>selected="selected"</#if>>其他</option>
                             <option value="0"<#if storeGoods.deliveryregion==0>selected="selected"</#if>  >国内</option>
                             <option value="1"<#if storeGoods.deliveryregion==1>selected="selected"</#if>>保税仓</option>
                             <option value="2"<#if storeGoods.deliveryregion==2>selected="selected"</#if>  >俄罗斯</option>
                             <option value="3"<#if storeGoods.deliveryregion==3>selected="selected"</#if>>澳大利亚</option>
                             <option value="4"<#if storeGoods.deliveryregion==4>selected="selected"</#if>  >新西兰</option>
                             <option value="5"<#if storeGoods.deliveryregion==5>selected="selected"</#if>>韩国</option>
                             <option value="6"<#if storeGoods.deliveryregion==6>selected="selected"</#if>>德国</option>
                         </select>
					  </dd>
                 </dl>
		        <dl>
					  <dt><span style="color: red" >*</span>所属馆：</dt>
					  <dd>		
					     <select name="storeGoods.is_belong" >
                             <option value="1"<#if storeGoods.is_belong==1>selected="selected"</#if>  >龙江物产</option>
                             <option value="0"<#if storeGoods.is_belong==0>selected="selected"</#if>>俄罗斯馆</option>
                             <option value="2"<#if storeGoods.is_belong==2>selected="selected"</#if>  >澳大利亚馆</option>
                             <option value="3"<#if storeGoods.is_belong==3>selected="selected"</#if>>新西兰馆</option>
                             <option value="4"<#if storeGoods.is_belong==4>selected="selected"</#if>  >韩国馆</option>
                             <option value="5"<#if storeGoods.is_belong==5>selected="selected"</#if>>德国馆</option>
                              <option value="6"<#if storeGoods.is_belong==6>selected="selected"</#if>>请选择</option>
                         </select>
					  </dd>
                 </dl>
                 <dl>
					<dt><span style="color: red">*</span>商品品牌：</dt>
					<dd>
						<select name="storeGoods.brand_id" >
							<option value="0" <#if storeGoods.brand_id==0>selected="selected"</#if> >请选择</option>
							<#list brandList as brand>
								<option value="${brand.brand_id!''}" <#if brand.brand_id==storeGoods.brand_id>selected="selected"</#if> >${brand.name!''}</option>
							</#list>
						</select>
					</dd>
				</dl>
                    <h1>2、<@uiLabel text="sellerAddGood.spxiaoshouxinxi"/></h1>
					<dl><dt nc_type="no_spec"><span class="red" style="color:#f00;">*</span><@uiLabel text="goods.shifouzhekou" />:</dt><dd><select id="is_discount" name="storeGoods.is_discount"  isrequired="true">
								<!--<option value ="">请选择</option>  -->
						 		<option value ="0" <#if storeGoods.is_discount==0> selected = "selected"</#if> ><@uiLabel text="sellerProductList.no" /></option>
						 		<option value ="1" <#if storeGoods.is_discount==1> selected = "selected"</#if> ><@uiLabel text="sellerProductList.yes" /></option>
						 	</select></dd></dl>
			<div class="addgoods" id="addgoodsprice">
<#--	暂不启用市场价格					-->
<#--				<dl>
					<dt nc_type="no_spec">
						<span class="red">*</span>市场价格：
					</dt>
					<dd nc_type="no_spec">
						<input type="text" class="text" fun="checkPriceNum" name="storeGoods.mktprice" value="${storeGoods.mktprice}" isrequired="true" dataType="float" />
					</dd>
				</dl>
				<dl>-->
				<dl>
					<!-- <dt nc_type="no_spec">
						<span style="color:red;">*</span><@uiLabel text="sellerAddGood.RublePrices"/>：
					</dt> -->
					<dd nc_type="no_spec">
						<p>
							<input type="hidden" class="text" fun="checkPriceNum" id="ruPrice" name="storeGoods.price_ru" dataType="float"  value="<#if storeGoods.is_discount==1>${storeGoods.cost_price_ru!0}<#else>${storeGoods.price_ru!0}</#if>" 
								<#if storeMarket=='RUS' > isrequired="true"</#if>/> <!-- 如果投放市场为俄罗斯，卢布价格为必填 -->
						</p>
					</dd>
				</dl>
				<dl>
					<!-- <dt nc_type="no_spec">
						<span style="color:red;"></span><@uiLabel text="sellerAddGood.RubleWhricePrices"/>：
					</dt> -->
					<dd nc_type="no_spec">
						<p>
						<#if storeGoods.whprice_ru==0>
							<input type="hidden" class="text" fun="checkPriceNum" name="storeGoods.whprice_ru" dataType="float" />
						<#else>
							<input type="hidden" class="text" fun="checkPriceNum" name="storeGoods.whprice_ru" dataType="float" value="${storeGoods.whprice_ru!0}" />
						</#if>
						</p>
					</dd>
				</dl>
    			<dl>
					<dt nc_type="no_spec">
						<span style="color:red;">*</span><@uiLabel text="sellerAddGood.RenminbiPrices"/>：
					</dt>
					<dd nc_type="no_spec">
						<p>
							<input type="text" id="rmbPrice" class="text" fun="checkPriceNum" name="storeGoods.price"  value="<#if storeGoods.is_discount==1>${storeGoods.cost_price!0}<#else>${storeGoods.price!0}</#if>" 
								 dataType="float"  <#if  storeMarket=='CHN' >isrequired="true"</#if> /><!-- 如果投放市场为中国，RMB价格为必填 -->
						</p>
					</dd>
				</dl>
    			<dl>
					<dt nc_type="no_spec"><@uiLabel text="sellerAddGood.RenminbiWhricePrices"/>：</dt>
					<dd nc_type="no_spec">
						<p>
						<#if storeGoods.whprice==0>
							<input type="text" class="text" fun="checkPriceNum" name="storeGoods.whprice"  dataType="float" />
						<#else>
							<input type="text" class="text" fun="checkPriceNum" name="storeGoods.whprice"  value="${storeGoods.whprice!0}" dataType="float" />
						</#if>
						</p>
					</dd>
				</dl>
				<dl>
					<!-- <dt nc_type="no_spec"><span style="color:red;">*</span><@uiLabel text="sellerAddGood.DollarPrices"/>：</dt> -->
					<dd nc_type="no_spec">
						<p>
						<#if storeGoods.price_en==0>
							<input type="hidden" class="text" fun="checkPriceNum" name="storeGoods.price_en" dataType="float" />
						<#else>
							<input type="hidden" class="text" fun="checkPriceNum" name="storeGoods.price_en"  value="${storeGoods.price_en!''}" dataType="float" />
						</#if>
						</p>
						<!-- <p class="hint"><@uiLabel text="sellerAddGood.cankaojiage"/></p> -->
					</dd>
				</dl>
				<dl>
					<!-- <dt nc_type="no_spec"><@uiLabel text="sellerAddGood.DollarWhricePrices"/>：</dt> -->
					<dd nc_type="no_spec">
						<p>
							<#if storeGoods.whprice_en==0>
								<input type="hidden" class="text" fun="checkPriceNum" name="storeGoods.whprice_en" dataType="float" />
							<#else>
								<input type="hidden" class="text" fun="checkPriceNum" name="storeGoods.whprice_en" value="${storeGoods.whprice_en!''}" dataType="float" />
							</#if>
						</p>
					</dd>
				</dl>
				
				<dl>
                     <dt nc_type="no_spec"><@uiLabel text="sellerAddGood.WholesaleVolume"/>：</dt>
                     <dd nc_type="no_spec">
                         <p>
                         	<#if storeGoods.wholesale_volume==0>
                             	<input type="text" class="text" fun="checkNum" name="storeGoods.wholesale_volume" dataType="int" />
                            <#else>
                            	<input type="text" class="text" fun="checkNum" name="storeGoods.wholesale_volume" dataType="int" value="${storeGoods.wholesale_volume!''}"/>
                            </#if> 
                            
                         </p>
                     </dd>
	            </dl>
	           			 <dl>
                            <dt nc_type="no_spec"><@uiLabel text="goods.shangpinzuixiaogoumai"/>：</dt>
                            <dd nc_type="no_spec">
                                <p>
                                    <input type="text" class="text" fun="checkNum" name="storeGoods.min_number" dataType="int" value="${storeGoods.min_number!''}" />
                                </p>
                            </dd>
                        </dl>
<#--	暂不启用成本价 -->
<#--				<dl>
					<dt nc_type="no_spec">
						<span class="red">*</span>成本价格：
					</dt>
					<dd nc_type="no_spec">
						<p>
							<input type="text" class="text" name="cost"  value="${storeGoods.cost}" isrequired="true" dataType="float" />
							<!-- 价格区间 &ndash;&gt;
						</p>
						<p class="hint">
							商品价格必须是0.01~1000000之间的数字
						</p>
					</dd>
				</dl>-->
				<#if storeGoods.is_discount==1>
				<dl id='rmbhtml'> <dt nc_type='no_spec'> <span style='color:red;'>*</span><@uiLabel text="goods.rmbzhekoujia" />：</dt> <dd nc_type='no_spec'> <p> <input type='text' class='text'  name='storeGoods.price' fun='checkPriceNum' dataType='float' isrequired='true' value="${storeGoods.price!''}"/> </p> </dd> </dl>
				<dl id='ruhtml'> 
					<!-- <dt nc_type='no_spec'> <span style='color:red;'>*</span><@uiLabel text="goods.ruzhekoujia" />：
					</dt>  -->
					<dd nc_type='no_spec'>
						 <p> <input type='hidden' class='text'  name='storeGoods.price_ru' fun='checkPriceNum' dataType='float' isrequired='true' value="${storeGoods.price_ru!''}" /> </p> 
					</dd> 
				</dl>
				</#if>
			</div>
                    <h1>3、<@uiLabel text="sellerAddGood.productDescriptionInfo"/><font color="red">（<@uiLabel text="sellerAddGood.pictureRule"/>）</font></h1>
				<dl>
					<dt><@uiLabel text="sellerAddGood.goodsPicture"/>：</br></dt>
					<dd>
						<div class="goods_image">
							<#-- <input type="hidden" name="image_default" value="${storeGoods.original}"/> -->
							<#if (storeGoodsInfo.galleryList?size) lt 8>
								<#-- 循环店铺商品列表 获取默认图片 
								<#list storeGoodsInfo.galleryList as gallery>
									<#if gallery.isdefault==1>
									<div style="float: left;height:200px;position:relative;text-align:center;margin-right:5px;">
										<img  src="${gallery.thumbnail}" width="100" height="100" id="img${gallery.img_id}">
										<br/>

										<input type="hidden" 	name="picnames"	id="fs_img${gallery.img_id}"  value="${gallery.original}"/>

										<input type="hidden" 	name="status"	value="2"	id="fs_status${gallery.img_id}" />

										<input type="file" 		id="goods${gallery.img_id}"  fs="${gallery.img_id}"	status="<@uiLabel text='sellerEditGoods.modityGoods'/>" <#if gallery.isdefault==1> is_default="true"<#else>is_default="false"</#if> />

										<input type="button" name="clean" 	value="<@uiLabel text="sellerAddGood.qingchu"/>" fs="${gallery.img_id}" class="del_addgoods"/>
									</div>
									<#break>
									</#if>
								</#list>
								-->
								<!-- 循环店铺商品列表 获取所有图片 -->
								<#list storeGoodsInfo.galleryList as gallery>
									<#-- <#if gallery.isdefault==0> -->
									<div style="float: left;height:200px;position:relative;text-align:center;margin-right:5px;">
										<img  src="${gallery.thumbnail}" width="100" height="100" id="img${gallery.img_id}">
										<br/>

										<input type="hidden" 	name="picnames"	id="fs_img${gallery.img_id}"  value="${gallery.original}"/>

										<input type="hidden" 	name="status"	value="2"	id="fs_status${gallery.img_id}" />
										<input name="image_default" type="radio" id="fs_defimg${gallery.img_id}" value="${gallery.original}" <#if gallery.isdefault==1>checked</#if>/><@uiLabel text="sellerAddGood.shizhutu"/>
										<input type="file" 		id="goods${gallery.img_id}"  fs="${gallery.img_id}"	status="<@uiLabel text='sellerEditGoods.modityGoods'/>" <#if gallery.isdefault==1> is_default="true"<#else>is_default="false"</#if> />

										<input type="button" name="clean" 	value="<@uiLabel text="sellerAddGood.qingchu"/>" fs="${gallery.img_id}" class="del_addgoods"/>
									</div>
									<#-- </#if> -->
								</#list>
								<!-- 没有上传图片的 图片 -->
								<#list (storeGoodsInfo.galleryList?size+1)..8 as t>
									<div style="float: left;height:200px;position:relative;text-align:center;margin-right:5px;">
										<img  src="${ctx}/themes/b2b2cv2/images/default_goods_image_tiny.gif" name="img${t}"  id="img${t}" width="100" height="100">
										<br/>
										<input type="hidden" 	name="goods_fs"	id="fs_img${t}" fs="${t}"/>
										<input type="hidden" 	name="status"	value="2"	id="fs_status${t}" />
										<input name="image_default" type="radio" id="fs_defimg${t}"/><@uiLabel text="sellerAddGood.shizhutu"/>
										<input type="file" 		id="goods-${t}"  fs="${t}"	status="<@uiLabel text="sellerAddGood.pictureUpLoad"/>" />
										<input type="button" name="clean" 	value="<@uiLabel text='sellerAddGood.qingchu'/>" fs="${t}" class="del_addgoods"/>
									</div>
								</#list>
							<#else>
								<!-- 循环店铺商品列表 获取默认图片 -->
<#-- 								<#list storeGoodsInfo.galleryList as gallery>
									<#if gallery.isdefault==1>
										<div style="float: left;height:200px;position:relative;text-align:center;margin-right:5px;">
											<img  src="${gallery.thumbnail}" width="100" height="100" id="img${gallery.img_id}">
											<br/>
											<input type="hidden" 	name="picnames"	id="fs_img${gallery.img_id}"  value="${gallery.original}"/>
											<input type="hidden" 	name="status"	value="2"	id="fs_status${gallery.img_id}" />
											<input type="file" 		id="goods${gallery.img_id}"  fs="${gallery.img_id}" <#if gallery.isdefault==1> is_default="true"<#else>is_default="false"</#if>	status="修改" />
											<input type="button" name="clean" 	value="<@uiLabel text='sellerAddGood.qingchu'/>" fs="${gallery.img_id}" class="del_addgoods"/>
										</div>
									</#if>
								</#list> -->
								<!-- 循环店铺商品列表 获取图片 -->
								<#list storeGoodsInfo.galleryList as gallery>
								<#-- 	<#if gallery.isdefault==0> -->
										<div style="float: left;height:200px;position:relative;text-align:center;margin-right:5px;">
											<img  src="${gallery.thumbnail}" width="100" height="100" id="img${gallery.img_id}">
											<br/>
											<input type="hidden" 	name="picnames"	id="fs_img${gallery.img_id}"  value="${gallery.original}"/>
											<input type="hidden" 	name="status"	value="2"	id="fs_status${gallery.img_id}" />
											<input name="image_default" type="radio" id="fs_defimg${gallery.img_id}" <#if gallery.isdefault==1>checked</#if> value="${gallery.original}"/><@uiLabel text="sellerAddGood.shizhutu"/>
											<input type="file" 		id="goods${gallery.img_id}"  fs="${gallery.img_id}"	status="修改" />
											<input type="button" name="clean" 	value="<@uiLabel text='sellerAddGood.qingchu'/>" fs="${gallery.img_id}" class="del_addgoods"/>
										</div>
								<#-- 	</#if> -->
								</#list>
							</#if>
							<br/>
						</div>
					</dd>
				</dl>

<#--	暂不启用商品品牌-->
<#--				-->
				<dl>
					<dt><@uiLabel text="sellerAddGood.productDescription"/>：</dt>
					<dd>
						<p>
							
							<!-- <textarea name="storeGoods.intro" cols="100" rows="8" id="intro" style="resize: none;">${storeGoods.intro!''}</textarea> -->
							<textarea name="storeGoods.intro" cols="100" rows="8" style="width:700px;height:200px;">${storeGoods.intro!''}</textarea>
						</p>
					</dd>
				</dl>
                    <h1>4、<@uiLabel text="sellerAddGood.goodsBaoZhangInfo"/></h1>
				 <!-- <dl>
                      <dt>
                      	<span style="color:red;">*</span>
                          <span><@uiLabel text="sellerAddGood.shangpinyunfei"/></span>商品运费
                      </dt>
                      <dd>
                          <p>
                          	<select name="storeGoods.freightType" id="freightType"  >

                          		<option value="1" <#if storeGoods.freightType=='1'> selected = "selected"</#if> ><@uiLabel text="sellerAddGood.baoyou"/></option>包邮
                          		<option value="2" <#if storeGoods.freightType=='2'> selected = "selected"</#if> ><@uiLabel text="sellerAddGood.zidingyiyunfei"/></option>自定义运费 
                          	</select>
                          </p>
                      </dd>
                  </dl> -->
                   <dl>
                            <dt>
                            	<span style="color:red;">*</span>
                                <span>商品运费 </span>
                            </dt>
                            <dd>
                                <p>
                                	<select name="storeGoods.freightType" id="freightType"  >

                                <option value="1" <#if storeGoods.freightType=='1'> selected = "selected"</#if> ><@uiLabel text="sellerAddGood.baoyou"/></option>包邮
                          		<option value="0" <#if storeGoods.freightType=='0'> selected = "selected"</#if> ><@uiLabel text="sellerAddGood.zidingyiyunfei"/></option>自定义运费 
                            
                                	</select>
                                </p>
                            </dd>
                        </dl>
                  
                  <dl style="display: none;">
					<dt>运费：</dt>
					<dd>
						<p style="float: left; clear: both; margin-top: 8px;">
							<input type="radio" value="1" name="storeGoods.goods_transfee_charge"  id="whops_seller"  <#if storeGoods.goods_transfee_charge==1>checked="checked"</#if>/>
							<label for="whops_seller">卖家承担运费</label>
						</p>
						<p style="float: left; clear: both; margin-top: 8px;">
							<input type="radio" value="0" name="storeGoods.goods_transfee_charge"  id="whops_buyer" <#if storeGoods.goods_transfee_charge==0>checked="checked"</#if>/>
							<label for="whops_buyer">买家承担运费</label>
						</p>
					</dd>
				</dl>
<#--	暂不启用店铺内商品分类				-->
<#--				<dl>
					<dt>本店分类：</dt>
					<dd>
						<p>
							<select name="storeGoods.store_cat_id">
								<#list storeGoodsCatList as cat>
									<#if cat?? && cat.store_cat_pid?? && cat.store_cat_pid==0>
										<option value="${cat.store_cat_id!0}"
												<#if storeGoods.store_cat_id?? && storeGoods.store_cat_id==cat.store_cat_id>selected="selected" </#if> >
										${cat.store_cat_name!''}
										</option>
									</#if>
									<#list storeGoodsCatList as childCat>
										<#if childCat.store_cat_pid==cat.store_cat_id>
											<option value="${childCat.store_cat_id}"
													<#if storeGoods.store_cat_id?? && storeGoods.store_cat_id==childCat.store_cat_id>selected="selected" </#if> >
												&nbsp;&nbsp;&nbsp;&nbsp;${childCat.store_cat_name!''}
											</option>
										</#if>
									</#list>
								</#list>
							</select>
						</p>
						<p class="hint">
							商品可以从属于店铺的多个分类之下,</br>店铺分类可以由 "商家中心 -> 商品管理 -> 分类管理" 中自定义
						</p>
					</dd>
				</dl>-->

                    <dl>
                        <dt>
                            <span><span style="color:red;">*</span><@uiLabel text="sellerAddGood.BaoZhangZhongLiang"/>(Kg)</span>
                        </dt>
                        <dd>
                            <p>
                                <input type="text" class="text" name="weight" value="${storeGoods.weight!0}" isrequired="true" dataType="float" />
                            </p>
                        </dd>
                    </dl>
                    <dl>
                        <dt>
                            <span><span style="color:red;">*</span><@uiLabel text="sellerAddGood.BaoZhangChiCun"/>（cm）</span>
                        </dt>
                        <dd>
                            <p>
                                <input type="text" class="text" name="storeGoods.depth" dataType="float" isrequired="true" value="${storeGoods.depth!0}" />（<@uiLabel text="sellerAddGood.longLabel"/>）
                            </p>
                            <p style="margin-top: 5px;">
                                <input type="text" class="text" name="storeGoods.width" dataType="float" isrequired="true" value="${storeGoods.width!0}" />（<@uiLabel text="sellerAddGood.PictureWigth"/>）
                            </p>
                            <p style="margin-top: 5px;">
                                <input type="text" class="text" name="storeGoods.height" dataType="float" isrequired="true" value="${storeGoods.height!0}" />（<@uiLabel text="sellerAddGood.PictureHight"/>）
                            </p>
                        </dd>
                    </dl>

                    <h1>5、<@uiLabel text="sellerAddGood.GoodsGuiGeInfo"/></h1>
                    <div id="spec-input">
                        <input type="hidden" name="haveSpec" id="haveSpec" value="${goodsSpec.have_spec!'0'}" />
					<#list goodsSpecList as spec>
                        <dl class="spec-bg" nctype="spec_group_dl" nc_type="spec_group_dl_${spec_index}">
                            <dt>
                           	<#if locale=="zh">
                               	${spec.spec_name!}
                            <#elseif locale=="ru">
                                ${spec.spec_name_ru!}
                            </#if>
                            </dt>
                            <dd>
                                <ul class="spec" <#if locale=="zh">specname="${spec.spec_name}"<#elseif locale=="ru">specname="${spec.spec_name_ru!}"</#if>>
									<#list spec.valueList as specValue>
                                        <li>
											<span nctype="input_checkbox">
												<input class="chk" autocomplete="off" type="checkbox" value="${specValue.spec_value_id}" spec_value="<#if locale=='zh'>${specValue.spec_value}<#elseif locale=='ru'>${specValue.spec_value_ru}</#if>" specid="${specValue.spec_id}" />
											</span>
                                            <span>
                                           <#--  ${specValue.spec_value} -->
                                            <#if locale=="zh">
                                            	${specValue.spec_value!}
                                            <#elseif locale=="ru">
                                            	${specValue.spec_value_ru!}
                                            </#if>
                                            </span>
                                        </li>
									</#list>
                                    <li style="display:none">
										<span>
											<input class="chkAll" autocomplete="off" type="checkbox"
												   specid="${spec.spec_id}"/>
										</span>
                                        <span><@uiLabel text="editGoods.allchecked"/>全选</span><!-- 全选 -->
                                    </li>
                                </ul>
                            </dd>
                        </dl>
                        <#if spec.spec_id==1000>
                        <dl class="spec-bg color-picture-table">
                            <dt><@uiLabel text="sellerAddGood.SetGuiGePicture"/></dt>
                            <dd>
                                <table  class="color_picture_table" width="400" style="margin:10px">
                                    <thead>
                                    </thead>
                                    <tbody>
                                    <#if goodsSpec.have_spec?exists && goodsSpec.have_spec==1 && goodsSpec.specList??>
	                        			<#list goodsSpec.specList as spec>
	                        				<#if spec.spec_id=1000 && spec.valueList??>
	                        					<#list spec.valueList as specValue>
			                        				<tr id="${specValue.spec_value_id!''}">
														<td>
														<#if locale=="zh">
														${specValue.spec_value!''}
														<#elseif locale=="ru">
														${specValue.spec_value_ru!''}
														</#if>
														<div id="s${specValue.spec_value_id!''}">
															<#if specValue.spec_image??>
																<img src="${specValue.spec_image!''}" style="width:30px;height:30px"/>
															</#if>
														</div></td>
														<td><input type="file" id="c${specValue.spec_value_id!''}" fs="${specValue.spec_value_id!''}"><input type="hidden" name="c_${specValue.spec_value_id!''}" value="${specValue.spec_image!''}" id="fs_img${specValue.spec_value_id!''}"></td>
													</tr>
	                        					</#list>
	                        				</#if>
	                        			</#list>
	                        		</#if>
                                    </tbody>
                                </table>
                                <div id="photoDiv"></div>
                            </dd>
                        </dl> 

                        </#if>

					</#list>
                        <dl class="spec-bg spec-table">
                            <dt><@uiLabel text="sellerAddGood.JiaGePeiZhi"/></dt>
                            <dd>
                                <table cellspacing="0" cellpadding="0" border="0" class="spec_table" width="98%">
                                    <thead>
                                    <tr>
									<#if goodsSpec.have_spec?exists && goodsSpec.have_spec==1 && goodsSpec.specList?exists >
										<#list goodsSpec.specList as spec>
                                            <th class="w1">
                                            <#if locale=="zh">
                                            	${spec.spec_name}
                                            <#elseif locale=="ru">
                                            	${spec.spec_name_ru!}
                                            </#if>
                                            </th>
                                            
										</#list>
									</#if>
                                        <th class="w2"><@uiLabel text="sellerAddGood.goodsHuoHao"/><span class="red"></span></th>
                                        <th class="w3"><@uiLabel text="sellerAddGood.zhongliang"/><span class="red">*</span></th>
                                        <th class="w2" id="price_ru" hidden><@uiLabel text="sellerAddGood.Ruble"/><span class="red">*</span></th>
                                        <th class="w2" hidden><@uiLabel text="sellerAddGood.RubleWhricePrices"/></th>
                                        <th class="w2" id="price_rmb"><@uiLabel text="sellerAddGood.Renminbi"/><span class="red">*</span></th>
                                        <th class="w2"><@uiLabel text="sellerAddGood.RenminbiWhricePrices"/></th>
                                        <th class="w2" hidden><@uiLabel text="sellerAddGood.Dolla"/></th>
                                        <th class="w2" hidden><@uiLabel text="sellerAddGood.DollarWhricePrices"/></th>
                                        <th class="w3"><@uiLabel text="sellerAddGood.qipiliang"/></th>
                                    </tr>
                                    </thead>
                                    <tbody>
									<#if goodsSpec.have_spec?exists && goodsSpec.have_spec==1 && goodsSpec.productList?exists >
										<#list goodsSpec.productList as product>
											<#assign specids=''>
											<#assign specvids=''>
											<#assign propid=''>
                                        <tr>
											<#list product.specList as spec>
												<#if spec_index!=0 >
													<#assign specids=specids+','>
													<#assign specvids=specvids+','>
													<#assign propid=propid+'_'>
												</#if>
												<#assign specids=specids+spec.spec_id>
												<#assign propid=propid+spec.spec_value_id>
												<#assign specvids=specvids+spec.spec_value_id>
                                                <td>
                                                <#if locale=="zh">
													${spec.spec_value}
												<#elseif locale=="ru">
													${spec.spec_value_ru!}
												</#if>
                                                    <input type="hidden" name="specvalue_${product_index}" value="${spec.spec_value}" />
                                                </td>
											</#list>
                                            <td>
                                                <input type="text" style="width: 150px" class="ipt" name="sns" prop='sn' propid="${propid}" value="${product.sn}" >
                                                <input type="hidden" name="productids" value="${product.product_id}" class="ipt" prop='productid' propid="${propid}" />
                                            </td>
                                            <td>
                                                <input type="text" size="10" name="weights" value="${(product.weight!0)?c}" class='ipt' prop='weight' propid="${propid}" class="input_text" style="width: 80px" isrequired="true"/>
                                            </td>
                                            <td style='display:none'>
                                                <input type="text" size="8" name="prices_ru" class='ipt price' value="<#if product.price_ru!=0>${(product.price_ru!0)?c}</#if>" prop='price_ru' propid="${propid}"/><!-- isrequired="true" -->
                                            </td>
                                            <td style='display:none'>
                                                <input type="text" size="8" name="whprices_ru" class='ipt price' value="<#if product.whprice_ru?? && product.whprice_ru!=0>${(product.whprice_ru!0)?c}</#if>" prop='whprices_ru' propid="${propid}"/>
                                            </td>
                                            <td>
                                                <input type="hidden" value="${specids}" name="specids">
                                                <input type="hidden" value="${specvids}" name="specvids">
                                                <!-- 形成price id，用js通过此id反向选择checkobx -->
                                                <input type="text" size="8" name="prices" class='ipt price' value="<#if product.price!=0>${(product.price!0)?c}</#if>" prop='price' propid="${propid}" isrequired="true"/>
                                            </td>
                                            <td>
                                                <input type="text" size="8" name="whprices" class='ipt price' value="<#if product.whprice?? && product.whprice!=0>${(product.whprice!'')?c}</#if>" prop='whprices' propid="${propid}"/>
                                            </td>
                                            <td style='display:none'>
                                                <input type="text" size="8" name="prices_en" class='ipt price' value="<#if product.price_en?? && product.price_en!=0>${(product.price_en!'')?c}</#if>" prop='price_en' propid="${propid}"/>
                                            </td>
                                            <td style='display:none'>
                                                <input type="text" size="8" name="whprices_en" class='ipt price' value="<#if product.whprice_en?? && product.whprice_en!=0>${(product.whprice_en!'')?c}</#if>" prop='whprices_en' propid="${propid}"/>
                                            </td>
                                            <td>
                                                <input type="text" size="8" name="wholesale_volumes" class='ipt price' value="<#if product.wholesale_volume?? && product.wholesale_volume!=0>${(product.wholesale_volume!'')}</#if>" prop='wholesale_volumes' propid="${propid}" dataType="int"/>
                                            </td>
<#--	暂不启用成本价 -->
<#--                                            <td>
                                                <input type="text" size="8" name="costs" value="${(product.cost!0)?c}" class='ipt' prop='cost' propid="${propid}" class="input_text" style="width: 80px" />
                                            </td>-->
                                        </tr>
										</#list>
									</#if>
                                    </tbody>
                                </table>
                            </dd>
                        </dl>
                    </div>
                    <h1>6、<@uiLabel text="sellerAddGood.goodsFaBuInfo"/></h1>
<#--                     <dl style="display: none;">
                        <dt>商品发布：</dt>
                        <dd>
                            <p class="mt5">
                                <label>
                                    <input type="radio" name="storeGoods.market_enable"<#if storeGoods.market_enable==1> checked="checked" </#if> value="1"/><@uiLabel text="sellerAddGood.lijifabu"/>
                                </label>
                            </p>
                            <p class="mt5">
                                <label>
                                    <input type="radio" name="storeGoods.market_enable"<#if storeGoods.market_enable==0> checked="checked" </#if>  value="0"/><@uiLabel text="sellerAddGood.baocuncaogao"/>
                                </label>
                            </p>
                        </dd>
                    </dl> -->
					<dl>
						<dt>
							<span><span class="red">*</span><@uiLabel text="sellerAddGood.GoodsValidity"/>：</span>
						</dt>
						<dd>
							<p>
								<input type="radio" value="15" <#if storeGoods.vaild_day==15>checked="checked"</#if>
									   name="storeGoods.vaild_day"
									   id="vaildDay_15">
								<label for="vaildDay_15"><@uiLabel text="sellerAddGood.bangeyue"/></label>
								<input type="radio" value="30" <#if storeGoods.vaild_day==30>checked="checked"</#if>
									   name="storeGoods.vaild_day"
									   id="vaildDay_30">
								<label for="vaildDay_30"><@uiLabel text="sellerAddGood.yigeyue"/></label>
								<input type="radio" value="90" <#if storeGoods.vaild_day==90>checked="checked"</#if>
									   name="storeGoods.vaild_day"
									   id="vaildDay_90">
								<label for="vaildDay_90"><@uiLabel text="sellerAddGood.sangeyue"/></label>
							  	<input type="radio" value="180"  <#if storeGoods.vaild_day==180>checked="checked"</#if>
                                       name="storeGoods.vaild_day"
                                       id="vaildDay_180">
                                 <label for="vaildDay_180"><@uiLabel text="sellerAddGood.liugeyue"/></label>
                                 <input type="radio" value="365" <#if storeGoods.vaild_day==365>checked="checked"</#if>
									   name="storeGoods.vaild_day"
									   id="vaildDay_365">
								<label for="vaildDay_365">12个月</label>
							</p>
						</dd>
					</dl>
					<dl><#--style="display: none;" --><#--market_enable为1时表示商品立刻上架，为零时表示下架，为-1时，表示草稿 ，为2时表示要审核-->
                            <dt><@uiLabel text="sellerAddGood.fubushangpin"/>：</dt>
                            <dd>
                                <p class="mt5">
                                    <label>
                                        <input type="radio" name="storeGoods.market_enable" checked="checked" value="2"/><@uiLabel text="sellerAddGood.lijifabu"/>
                                    </label>
                                </p>

                                <p class="mt5">
                                    <label>
                                        <input type="radio" name="storeGoods.market_enable"  value="-1"/><@uiLabel text="sellerAddGood.baocuncaogao"/><#-- 暂不发布 -->
                                    </label>
                                </p>
                            </dd>
                        </dl>
				<div class="clear">
					<p>&nbsp;</p>
					<p>&nbsp;</p>
				</div>
				<div class="ncu-form-style tc pb30">
					<input type="button" value="<@uiLabel text='sellerEditGoods.moditySaveGoods'/>" id="editBtn" class="submit to_save"  style="display:inline-block;margin-top:20px;"/>
				</div>
			</div>
			</form>
		</div>
	</div>
	
</div>	

<script type="text/javascript">
var app_path="${ctx}";
$(function(){
	loadLogisModel();
	//$('#intro').ckeditor();
	if($("#goodsdiscount").val()==1){
		$("#rmbPrice").attr("name","storeGoods.cost_price");
		$("#ruPrice").attr("name","storeGoods.cost_price_ru");
		$("#price_ru").text("<@uiLabel text='goods.ruzhekoujia' />*");
		$("#price_rmb").text("<@uiLabel text='goods.rmbzhekoujia' />*");
	}
	$("#whops_seller").click(function(){
		$("#whops_buyer_box").hide();
	});
	$("#whops_buyer").click(function(){
		$("#whops_buyer_box").show();
	});
	window.onload=function(){
		<#list storeGoodsInfo.galleryList as gallery>
			bindFileEvent($("#goods${gallery.img_id}"));
		</#list>
		<#if (storeGoodsInfo.galleryList?size)<8>
			<#list (storeGoodsInfo.galleryList?size+1)..8 as t>
				bindFileEvent($("#goods-${t}"));
			</#list>
		</#if>
        <#if goodsSpec.have_spec?exists && goodsSpec.have_spec==1 && goodsSpec.specList??>
		<#list goodsSpec.specList as spec>
			<#if spec.spec_id=1000 && spec.valueList??>
				<#list spec.valueList as specValue>
					bindFileEventForColor($("#c${specValue.spec_value_id!''}"));
				</#list>
			</#if>
		</#list>
		</#if>
	}
	function bindFileEvent(obj){
		var status=$(obj).attr("status");
		var url="";
		$(obj).uploadify({
			'buttonText':status,		//显示文字
			'fileObjName':'image',		//文件对象名称
										//上传文件大小限制 'fileSizeLimit':'100KB',
			'fileTypeDesc': '请选择',//允许上传的文件类型的描述，在弹出的文件选择框里会显示 
			'fileTypeExts': '*.gif; *.jpg; *.png',//允许上传的文件类型，限制弹出文件选择框里能选择的文件 
			'uploader' : '${ctx}/api/base/upload-image.do?subFolder=/store/${storeMember.store_id}/goods',
			'swf'      : '${ctx}/themes/b2b2cv2/uploadify.swf',
			'height':'30',				//高度
			'width':'70',
			'multi':true,				//是否支持多文件上传
			'progressData':'percentage',//设置文件上传时显示的数据
			'uploadLimit':8,
			'onFallback':function(){				//falsh兼容
				alert("<@uiLabel text='editGoods.mafanleflash' />!");//麻烦了，不兼容falsh
			},
			'onUploadStart' : function(file) {
				var fs= $(obj).attr("fs");
				url=$("#fs_img"+fs).val();
	        },
			'onUploadSuccess':function(file,data,response){
				var img =jQuery.parseJSON(data);
				var fs= $(obj).attr("fs");
				$("#img"+fs).attr("src",img.img);
				$("#fs_img"+fs).val(img.img);
				$("#fs_img"+fs).attr("name","picnames");
				if(status=="修改"){
					$("#fs_status"+fs).val("3");
					$(".goods_image").append("<input type='hidden' name='del_pic' value='"+url+"'/>");
				}else{
					$("#fs_status"+fs).val("1");
				}
				$("#fs_defimg"+fs).val(img.img);
/* 				if($(obj).attr("is_default")=="true"){
					$("input[name='image_default']").val(img.img);
				} */
			},
			'onSelectError':function(file,errorCode,errorMsg){
				if(errorCode==SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){
					this.queueData.errorMsg="<@uiLabel text="sellerAddGood.uploadDataLimitations1"/>";
				}
				if(errorCode==SWFUpload.QUEUE_ERROR.INVALID_FILETYPE){
					this.queueData.errorMsg="<@uiLabel text="sellerAddGood.uploadDataLimitations2"/>";
				}
			}
		});
	}
	$("input[name='clean']").click(function(){
		var fs=$(this).attr("fs");
		$("#img"+fs).attr("src","");
		//$("#fs_status"+fs).val("0");
		$("#fs_img"+fs).attr("name","del_pic");
	});
	$("#editBtn").click(function(){
		var str = "[@/'\"#$%&^*]+";
		var goodsname = $(".store_goodsname").val()
		var reg = new RegExp(str);
/*		if(reg.test(goodsname))
		 {
		    alert("商品名称只能是数字、汉字、英文");
		    return false;
		 }
*/
		// 拼接关键字字符串
		var meta_keywords = "";
		$("input[name='metaKeyword']").each(function( i , n){
			if($(n).val()!=""){
                meta_keywords += $(n).val() + ","
			}
		});
		 if($("input[name='storeGoods.wholesale_volume']").val()>0){
         	if(!$("input[name='storeGoods.whprice']").val()||$("input[name='storeGoods.whprice']").val()<=0){
         		alert("需填商品批发价，并且大于零！");
         		return false;
         	}
         }
         if($("input[name='storeGoods.whprice']").val()>0){
         	if(!$("input[name='storeGoods.wholesale_volume']").val()||$("input[name='storeGoods.wholesale_volume']").val()<=0){
         		alert("需填商品批发数，并且大于零！");
         		return false;
         	}
         }
         var lmtpfs=0,lmtpfj=0;
         $("input[name='wholesale_volumes']").each(function( i , n){
         	if($(n).val()>0){
         		if(!$(n).parent().parent().find("input[name='whprices']").val()||$(n).parent().parent().find("input[name='whprices']").val()<=0){
         			alert("需填商品规格批发价，并且大于零！");
         			lmtpfj=1;
             		return false;
             		
         		}
         	}
         });
         if(lmtpfj>0){
      	   return false;
         }
         $("input[name='whprices']").each(function( i , n){
         	if($(n).val()>0){
         		if(!$(n).parent().parent().find("input[name='wholesale_volumes']").val()||$(n).parent().parent().find("input[name='wholesale_volumes']").val()<=0){
         			alert("需填商品规格批发数，并且大于零！");
         			lmtpfs=1;
             		return false;
         		}
         	}  
         });
        if(lmtpfs>0){
     	   return false;
        }
		$("#meta_keywords").val(meta_keywords);
		 if($("#is_discount").val() == 1){
 			var rmb_price = parseInt($("input[name='storeGoods.price']").val());
         	var cost_price = parseInt($("input[name='storeGoods.cost_price']").val());
         	if(rmb_price > cost_price){
         		alert("<@uiLabel text='goods.rmbzhekoutishi' />");
         		return false;
         	}
         	var ru_price = parseInt($("input[name='storeGoods.price_ru']").val());
         	var cost_price_ru =parseInt($("input[name='storeGoods.cost_price_ru']").val()); 
         	if(ru_price > cost_price_ru){
         		alert("<@uiLabel text='goods.ruzhekoutishi' />");
         		return false;
         	}
         }
		if(!$("#storeGoodsForm").checkall())
			return false;
		var yufei1 = $("#freight").val();
		var yunfei2 = $("#freightru").val();
		if(yufei1<0 || yunfei2 <0){
			alert("<@uiLabel text='goods.freightnotnegative' />");
     		return false;
		}
		$("#saveBtn").attr({"disabled":"disabled"});
		var good_id = $("input[name='storeGoods.goods_id']").val();
		var options = {
				url : ctx+"/api/b2b2c/goods!edit.do?ajax=yes",
				type : "POST",
				dataType : "json",
				success : function(result) {
					$.Loading.message(result.message);
					if(result.result==0){
					$("#saveBtn").removeAttr("disabled");
					}else{
						location.href="goods_list.html?menu=store_goods&colorFlag=purple&sort=&goods_id="+good_id;
					}
			 	},
			 	error : function(e) {
			 		alert("<@uiLabel text='editGoods.chuxiancuowu' />出现错误，请重试");//出现错误，请重试
				}
			};
		$("#storeGoodsForm").ajaxSubmit(options);	
	});
})
    function loadLogisModel(){
   	  var store_id=$("#store_logis_id").val();
   	
   	  $.ajax({
 			url: "${ctx}/api/shop/logis!loadLogisModel.do?store_id="+store_id,
 			type : "GET",
			async : false,
			dataType : "json",
 			success : function(result) {
 				if(result.result==1){
 					//alert("成功");
 					//alert(result.data[0].text);
 					var obj = $("#freightType");
 					//遍历
 					for(var i=0;i<(result.data).length;i++){
 						//取出其中一条地址信息
 						var logis = result.data[i];
 						//添加到下拉列表
 						obj.append("<option  value='"+logis.is_name+"'>"+logis.model_name+"</option>");
 					}
 					var myFreightType = $("#myFreightType").val();
					$("#freightType option[value="+myFreightType+"]").attr("selected",true);
 				}else{
 					alert("失败");
 				}
 				
 			} 
 		});
    }

	function bindFileEventForColor(obj) {
		var status = $(obj).attr("fs");
		$(obj).uploadify(
		{
			'buttonText' : '<@uiLabel text="sellerAddGood.ShangChuanTuPian"/>', //显示文字
			'fileObjName' : 'image', //文件对象名称
			'fileTypeDesc' : '<@uiLabel text="sellerAddGood.ShangChuanTuPian"/>',//允许上传的文件类型的描述，在弹出的文件选择框里会显示  //请选择
			'fileTypeExts' : '*.gif; *.jpg; *.png',//允许上传的文件类型，限制弹出文件选择框里能选择的文件 
			'uploader' : '${ctx}/api/base/upload-image.do?subFolder=store',
			'swf' : '${ctx}/themes/b2b2cv2/uploadify.swf',
			'height' : '30', //高度
			'width' : '80',
			'multi' : false, //是否支持多文件上传
			'progressData' : 'percentage',//设置文件上传时显示的数据
			'uploadLimit' : 8,
			'onFallback' : function() { //falsh兼容
				alert("<@uiLabel text='editGoods.mafanleflash' />!");//麻烦了，不兼容falsh
			},
			'onUploadSuccess' : function(file, data, response) {
				var img = jQuery.parseJSON(data);
				$("#fs_img"+status).val(img.img);
				$("#s" + status).html("<img src='"+img.img+"'style='width:30px;height:30px'/>");
			},
			'onSelectError' : function(file, errorCode,
					errorMsg) {
				if (errorCode == SWFUpload.QUEUE_ERROR.INVALID_FILETYPE) {
					this.queueData.errorMsg = "<@uiLabel text="sellerAddGood.uploadDataLimitations2"/>";
				}
			}
		});
	}
	function checkdelivery(value){
 		if(value==7){
 			return "请选择发货地";
 		}else{
 			return true;
 		}
 	}
 	function checkisbelong(value){
 		if(value==6){
 			return "请选择所属馆";
 		}else{
 			return true;
 		}
 	}
 	function checkbrandid(value){
 		if(value==0){
 			return "请选择商品品牌";
 		}else{
 			return true;
 		}
 	}
	function checkGoodsName(value){
		var goodsName=$("input[name='storeGoods.name']");
		if(goodsName.val().length<3||goodsName.val().length>150)
			return "<@uiLabel text="sellerAddGood.productNameError"/>！";
		else return true;
	}

	function checkPriceNum(value){
		if(value<=0 && value!=""){
			return "<@uiLabel text="sellerAddGood.productPriceError"/>！";
		}else{
			return true;
		}
	} 
 	
 	function checkNum(value){
		if(value<0 && value!=""){
			return "<@uiLabel text="sellerAddGood.productNumError"/>！";
		}else{
			return true;
		}
	} 
 	$("#is_discount").change(function() {
		if($("#is_discount").val() == 1) {
			$("#rmbhtml").remove();
			$("#ruhtml").remove();
			var rmbhtml = "<dl id='rmbhtml'> <dt nc_type='no_spec'> <span style='color:red;'>*</span><@uiLabel text='goods.rmbzhekoujia' />：</dt> <dd nc_type='no_spec'> <p> <input type='text' class='text'  name='storeGoods.price' fun='checkPriceNum' dataType='float' isrequired='true' /> </p> </dd> </dl>";
			var ruhtml = "<dl id='ruhtml'> <dd nc_type='no_spec'> <p> <input type='hidden' class='text'  name='storeGoods.price_ru' fun='checkPriceNum' dataType='float' value='0.0' /> </p> </dd> </dl>";
			//var ruhtml = "<dl id='ruhtml'> <dt nc_type='no_spec'> <span style='color:red;'>*</span><@uiLabel text='goods.ruzhekoujia' />：</dt> <dd nc_type='no_spec'> <p> <input type='text' class='text'  name='storeGoods.price_ru' fun='checkPriceNum' dataType='float' isrequired='true' /> </p> </dd> </dl>";
			$("#addgoodsprice").append(rmbhtml);
			$("#addgoodsprice").append(ruhtml);
			$("#rmbPrice").attr("name","storeGoods.cost_price");
			$("#ruPrice").attr("name","storeGoods.cost_price_ru");
			$("#price_ru").text("<@uiLabel text='goods.ruzhekoujia' />*");
			$("#price_rmb").text("<@uiLabel text='goods.rmbzhekoujia' />*");
		} else {
			$("#rmbhtml").remove();
			$("#ruhtml").remove();
			$("#rmbPrice").attr("name","storeGoods.price");
			$("#ruPrice").attr("name","storeGoods.price_ru");
			$("#price_ru").text("<@uiLabel text='sellerAddGood.RublePrices' />*");
			$("#price_rmb").text("<@uiLabel text="sellerAddGood.RenminbiPrices" />*");
		}
	});
</script>
<script>
KindEditor.ready(function(K) {
    var editor1 = K.create('textarea[name="storeGoods.intro"]', {
        cssPath : '../../editor/kindeditor-4.1.10/plugins/code/prettify.css',
        uploadJson : '${ctx}/eop/kindeditorUploader.do',
        fileManagerJson : '../../editor/kindeditor-4.1.10/jsp/file_manager_json.jsp',
        allowFileManager : true,
        afterCreate : function() {
        	 this.sync();
        },
	    afterBlur:function(){
	        this.sync();
	    }    
    });
    prettyPrint();
  
});

	$(function(){
		<#if storeGoods.freightType=='0'> 
			var html = "<div id=sp1><input type='text' class='text' id='freight' name='storeGoods.freight' dataType='float' isrequired='true' /><span ><@uiLabel text="sellerAddGood.Renminbi" /></span></div> ";
			$("#freightType").parent().append(html);
			/* var html2 = "<div id=sp2 style='display:none;'><input type='text' class='text' id='freightru' name='storeGoods.freightru' dataType='float' isrequired='true' value='0.1'/><span ><@uiLabel text="sellerAddGood.Ruble" /> </span> </div> ";
			$("#freightType").parent().append(html2); */
			var yunfei1=$("#freightchn").val();
		/* 	var yunfei2=$("#freightru1").val(); */
			if(yunfei1>0 || yunfei2>0){
				$("#freightType").val(0);
				$("#freight").val(yunfei1);
				/* $("#freightru").val(yunfei2); */
			}
		</#if> 
	})

 	$("#freightType").change(function() {
		if($("#freightType").val() == 0) {
			$("#freight").remove();
			/* $("#freightru").remove(); */
			$("#sp1").remove();
		/* 	$("#sp2").remove(); */
			
			var html = "<div id=sp1><input type='text' class='text' id='freight' name='storeGoods.freight' dataType='float' isrequired='true' /><span ><@uiLabel text="sellerAddGood.Renminbi" /> </span></div> ";
			
			$("#freightType").parent().append(html);
		
			/* var html2 = "<div id=sp2 style='display:none;'><input type='text' class='text' id='freightru' name='storeGoods.freightru' dataType='float' isrequired='true' value='0.1'/><span ><@uiLabel text="sellerAddGood.Ruble" /> </span> </div> ";
		
			$("#freightType").parent().append(html2); */
			
			var yunfei1=$("#freightchn").val();
			/* var yunfei2=$("#freightru1").val(); */
			if(yunfei1>0 || yunfei2>0){
				$("#freightType").val(0);
				$("#freight").val(yunfei1);
				/* $("#freightru").val(yunfei2); */
			}
			
		} else {
			$("#freight").remove();
			$("#freightru").remove();
			$("#sp1").remove();
			$("#sp2").remove();
		}
	});
	 
	$(function(){
		if($("#ruPrice").val().toFixed(2)<=0){
			$("#ruPrice").attr("value","");
		}
		if($("#rmbPrice").val().toFixed(2)<=0){
			$("#rmbPrice").attr("value","");
		}
	})
</script>
<#include '/common/seller_footer.html' />